# Modern Encryption Algorithm
---
## Modern Encryption Algorithm - Symmetric Key Algorithm
>Symmetric key algorithm, 또는 Conventional Algorithm 이라고도 불리는 현대 암호화 알고리즘이다.  
>메시지의 기밀성을 유지하기 위해 주로 쓰인다.  

- 알고리즘 분류 기준
  - 어떤 연산이 사용되는가?
  - 키의 갯수가 몇 개인가?
  - Plaintext가 어떤 단위로 처리가 되는가?

### Cryptanalysis
- Attack Method
  - Ciphertext only : 가장 최소한의 정보만을 이용하여, Plaintext를 복원하는 공격법. 매우 실현하기가 어렵다.(e.g. 문자 빈도 수 유추)  
                      ==> Weak Algorithm은 이 공격에 매우 약할 수 밖에 없다.
  - Known plaintext : 이전에 사용되었던 Pair of plaintext/ciphertext를 통한 지식을 갖고 있을 때, __Key__ 에 대한 복원을 하는 공격. Key를 바꾸게 되면 무용지물!  
                      ==> 이 공격에 대하여 강한 방어 대책을 세우는 방향으로 알고리즘을 세운다.
  - Chosen Ciphertext : 선택된 Plaintext의 Ciphertext Pair을 얻을 수 있는 경우, 암호화 프로그램에 접근이 가능할 때
  - Chosen Plaintext : 반대로 Plaintext Pair을 얻을 수 있는 경우, 복호화 프로그램에 접근이 가능할 때
  - Chosen text :

### Computationaly Secure Algorithm
- Encryption이 언제 Computationaly Secure한가?
  - Breaking Cipher에 드는 Cost가 원본 데이터의 가치보다 비쌀 경우.
  - 정보의 유효 시간보다 Breaking Cipher에 드는 Time이 더 드는 경우.
  - 이 Cost나 Time에 대한 Test를 진행할 때 Brute Force를 이용하여 얼마나 Cost, Time이 드는지 점검한다.

### Block Cipher Structure
- n bits 단위의 Block들로 구성된 Structure이다.
  - Key를 통한 Substitution / Permutation을 통해 암호화
  - 여러개의 Round로 구성됨.(Feistel Network)
  - Block size, Key size, Round Number(항상 짝수), Subkey Algorithm, Round Function, Fast Operation(Enc / Dec)로 구성된다.
- S/P Network(Substitution / Permutation)  

![spnet](https://user-images.githubusercontent.com/71700079/116187893-639f9080-a761-11eb-84eb-caafd7c4080c.PNG)  

- Feistel Network
  - Confusion : Ciphertext와 Encryption Key Value와의 통계적 관계를 매우 복잡하게 만든다.
  - Diffusion : Ciphertext와 Plaintext의 통계적 관계를 매우 복잡하게 만든다.  
  
![Feistel](https://user-images.githubusercontent.com/71700079/116188069-b0836700-a761-11eb-9f64-d416a3342094.PNG)  

- Encryption / Decryption of Feistel Network
  - n-bits Plaintext ==> n-bits Ciphertext
  - Round number : Feistel network의 반복 횟수
  - Encryption : Feistel Network의 동일 과정의 반복을 통한 암호화, 하지만 매 라운드 마다 다른 Subkey(Ki)(Auxiliary, Partial key)가 사용된다.
  - Decryption : Encryption 과정과 동일하게 진행을 하되, Subkey의 순서가 역순으로 사용된다.

### DES(Data Encryption Standard)
- DES Attribute
  - 매우 강한 __Avalanche Effect__ 를 갖고 있다. (Avalanche Effect? Plaintext의 한 bit만 바꾸어도 64bit 전체가 바뀌어버리는 현상, 쇄도 효과)
  - Fixed Cipher Key : Plaintext를 1bit만 변화시켜도 Ciphertext는 32bit가 바뀌어 버린다.
  - Fixed Plaintext : Cipher "Key"가 1 bit만 바뀌어도, Ciphertext는 32bit가 바뀌어 버린다.
- DES Configuration
  - 64bit Block Cipher with 64bit block in/out
  - 64bit Plaintext(Input)
  - 56bit Key + 8bit Parity Code
  - 16 Rounds of Operation(Feistel Round)
- DES Process
  1. Initial Permutation(IP)
  2. 16 Round of Feistel
  3. Substitution
  4. Inverse Initial Permutation(IIP)
- DES Structure : IP, IIP  

![캡처](https://user-images.githubusercontent.com/71700079/116696495-f3ad3680-a9fc-11eb-84e3-a8a82abe4360.PNG)  

  - Initial Permutation : 이 과정은 암호화 과정은 아니다. Permutation Table에 따라 bit를 swap만 해주는 역할. Salt 과정과 유사하다고 생각하면 된다.
  - 입력되는 64bit Plaintext가 Bit Swap되어 S-Box(Round Function)로 들어간다.
  - Permutation Table  
  
  ![캡처](https://user-images.githubusercontent.com/71700079/116696417-d8422b80-a9fc-11eb-8106-f1f13b767e99.PNG)  
  
  - Inverse Permutation Table  
  
  ![캡처](https://user-images.githubusercontent.com/71700079/116697336-02e0b400-a9fe-11eb-8634-0c29054f4dd2.PNG)  
  
- DES Structure : Round(Feistel)
  - 16개의 Subkey를 생성하며 16번의 Feistel Round를 진행하는 과정이다. Mixer와 Swapper를 통해 본격적인 암호화 과정에 들어간다.
  - BtoW 함수를 이용해, 64bit text를 L, R으로 32bit씩 쪼개고 Round를 돌린 뒤 WtoB 함수를 이용해 다시 64bit text로 합친다.  
  
  ![캡처](https://user-images.githubusercontent.com/71700079/116697695-77b3ee00-a9fe-11eb-9a0c-a0e54a6d5d8b.PNG)

- DES Function(F)
  - Mixer에서 Round Function 역할을 하는 함수이다. bit의 확장을 담당한다. (Why? 확장을 통해서 Round key generator의 bit 수와 맞춰 주기 위함!)  
  
  ![캡처](https://user-images.githubusercontent.com/71700079/116698245-193b3f80-a9ff-11eb-9762-7ba43b7dec05.PNG)  
  
  - Expansion P(permutation) box  
  
  ![캡처](https://user-images.githubusercontent.com/71700079/116699667-cebac280-aa00-11eb-985c-8b3e843a3eaa.PNG)  
  
  - S(Substitution)-Box : Key와 XOR 연산을 거친 48 bit 였던 text를 32 bit로 다시 추려내는 과정. 각 Box의 제일 첫 비트와 마지막 비트는  
  
  ![캡처](https://user-images.githubusercontent.com/71700079/116701230-a16f1400-aa02-11eb-8f67-84c38244b275.PNG)  
  
  - P-Box : 마지막으로 한번 더 Permutation 과정을 거쳐 완전히 f(Ri, Ki)의 함수 결과를 도출한다.  
  
  ![캡처](https://user-images.githubusercontent.com/71700079/116701651-1e01f280-aa03-11eb-80fc-49d79483da5c.PNG)  

- DES Structure : Swapper
  - 마지막 Round가 아닐 경우 Li와 Ri를 서로 바꾼다.
- DES Structure : WtoB(Word to Byte) Code
  - 32bit L과 R을 64bit로 다시 합친다.
- DES Key generation
  - Parity Drop(Permuted Choice-1)
  - Shift Left
  - Compression P-Box(Permuted Choice-2)

### Triple DES
- Triple DES with 2 keys
- Triple DES with 3 keys
